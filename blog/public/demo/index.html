<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Decentralized Badge Issuance: An End-to-End Workflow | BadgeFed Official Blog</title>
<meta name="keywords" content="">
<meta name="description" content="BadgeFed Workflow: Decentralized Badge Issuance and Sharing

An admin creates an issuer. The issuer page acts as an ActivityPub actor, and an endpoint for an OpenBadge issuer is also provided.


For example, visit this issuer page. The page represents an issuer and displays its followers. You can copy the issuer&rsquo;s URL and open it in Mastodon, where you will be able to view, follow, and interact with the issuer directly from Mastodon.">
<meta name="author" content="VocalCat">
<link rel="canonical" href="https://badgefed.vocalcat.com/demo/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css" integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF&#43;13Dyqob6ASlTrTye8=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://badgefed.vocalcat.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://badgefed.vocalcat.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://badgefed.vocalcat.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://badgefed.vocalcat.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://badgefed.vocalcat.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://badgefed.vocalcat.com/demo/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://badgefed.vocalcat.com/demo/">
  <meta property="og:site_name" content="BadgeFed Official Blog">
  <meta property="og:title" content="Decentralized Badge Issuance: An End-to-End Workflow">
  <meta property="og:description" content="BadgeFed Workflow: Decentralized Badge Issuance and Sharing
An admin creates an issuer. The issuer page acts as an ActivityPub actor, and an endpoint for an OpenBadge issuer is also provided. For example, visit this issuer page. The page represents an issuer and displays its followers. You can copy the issuer’s URL and open it in Mastodon, where you will be able to view, follow, and interact with the issuer directly from Mastodon.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:published_time" content="2025-05-19T08:40:00-07:00">
    <meta property="article:modified_time" content="2025-05-19T08:40:00-07:00">
      <meta property="og:image" content="https://badgefed.vocalcat.com/images/avatar.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://badgefed.vocalcat.com/images/avatar.png">
<meta name="twitter:title" content="Decentralized Badge Issuance: An End-to-End Workflow">
<meta name="twitter:description" content="BadgeFed Workflow: Decentralized Badge Issuance and Sharing

An admin creates an issuer. The issuer page acts as an ActivityPub actor, and an endpoint for an OpenBadge issuer is also provided.


For example, visit this issuer page. The page represents an issuer and displays its followers. You can copy the issuer&rsquo;s URL and open it in Mastodon, where you will be able to view, follow, and interact with the issuer directly from Mastodon.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Decentralized Badge Issuance: An End-to-End Workflow",
      "item": "https://badgefed.vocalcat.com/demo/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Decentralized Badge Issuance: An End-to-End Workflow",
  "name": "Decentralized Badge Issuance: An End-to-End Workflow",
  "description": "BadgeFed Workflow: Decentralized Badge Issuance and Sharing\nAn admin creates an issuer. The issuer page acts as an ActivityPub actor, and an endpoint for an OpenBadge issuer is also provided. For example, visit this issuer page. The page represents an issuer and displays its followers. You can copy the issuer\u0026rsquo;s URL and open it in Mastodon, where you will be able to view, follow, and interact with the issuer directly from Mastodon.\n",
  "keywords": [
    
  ],
  "articleBody": "BadgeFed Workflow: Decentralized Badge Issuance and Sharing\nAn admin creates an issuer. The issuer page acts as an ActivityPub actor, and an endpoint for an OpenBadge issuer is also provided. For example, visit this issuer page. The page represents an issuer and displays its followers. You can copy the issuer’s URL and open it in Mastodon, where you will be able to view, follow, and interact with the issuer directly from Mastodon.\nThe admin creates a badge or credential and associates it with the issuer. The admin grants a badge or credential to a recipient using a URL, phone number, or email address, following the OpenBadges standard. If the URL is a Fediverse actor, the recipient receives a private ActivityPub notification. If an email is provided, BadgeFed sends a link via email. An approval link is also available for manual sharing. The recipient accepts the badge and chooses to make it public or private. BadgeFed creates a note and associates it with the OpenBadge. This note is decentralized by sending it to the inboxes of the issuer’s followers using ActivityPub. The note mentions the recipient, and the badge URL is also an ActivityPub object. The OpenBadge can be exported from this page. For example, check out this badge.\nIt shows a credential granted to a Fediverse profile and has a note representation.\nCopy the badge URL and paste it into Mastodon; you can boost, comment, and share this note.\nAll comments will appear on the badge page.\nIf you make an Accept: application/activity+json request to the badge URL, it will also return an ActivityPub object.\nIf any of the issuer’s followers is another BadgeFed issuer, they can consume and store a copy of the badge, further decentralizing it. For example, see this external badge.\nIt demonstrates a decentralized badge that can be viewed at its original URL, following a pattern similar to other Fediverse services like Mastodon.\nAny recipient can search for their badges on any BadgeFed instance. The search will display badges from the local instance as well as external badges. Similar to Mastodon, badges can be viewed on the current server or opened at their original source. ActivityPub integration enables decentralized badge sharing and notifications across the Fediverse.\n",
  "wordCount" : "370",
  "inLanguage": "en",
  "image": "https://badgefed.vocalcat.com/images/avatar.png","datePublished": "2025-05-19T08:40:00-07:00",
  "dateModified": "2025-05-19T08:40:00-07:00",
  "author":{
    "@type": "Person",
    "name": "VocalCat"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://badgefed.vocalcat.com/demo/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "BadgeFed Official Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://badgefed.vocalcat.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://badgefed.vocalcat.com/" accesskey="h" title="BadgeFed Official Blog (Alt + H)">BadgeFed Official Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://badgefed.vocalcat.com/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://badgefed.vocalcat.com/post" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://badgefed.vocalcat.com/">Home</a></div>
    <h1 class="post-title entry-hint-parent">
      Decentralized Badge Issuance: An End-to-End Workflow
    </h1>
    <div class="post-meta"><span title='2025-05-19 08:40:00 -0700 -0700'>May 19, 2025</span>&nbsp;·&nbsp;VocalCat

</div>
  </header> 
  <div class="post-content"><p><strong>BadgeFed Workflow: Decentralized Badge Issuance and Sharing</strong></p>
<ol>
<li>An admin creates an issuer. The issuer page acts as an ActivityPub actor, and an endpoint for an OpenBadge issuer is also provided.</li>
</ol>
<blockquote>
<p>For example, visit <a href="https://badges.vocalcat.com/view/actor/badges.vocalcat.com/fediverse">this issuer page</a>. The page represents an issuer and displays its followers. You can copy the issuer&rsquo;s URL and open it in Mastodon, where you will be able to view, follow, and interact with the issuer directly from Mastodon.</p></blockquote>
<p><img alt="BadgeFed Workflow Diagram" loading="lazy" src="/images/s02.png"></p>
<ol start="2">
<li>The admin creates a badge or credential and associates it with the issuer.</li>
</ol>
<p><img alt="BadgeFed Workflow Diagram" loading="lazy" src="/images/s04.png"></p>
<ol start="3">
<li>The admin grants a badge or credential to a recipient using a URL, phone number, or email address, following the OpenBadges standard. If the URL is a Fediverse actor, the recipient receives a private ActivityPub notification. If an email is provided, BadgeFed sends a link via email. An approval link is also available for manual sharing.</li>
</ol>
<p><img alt="BadgeFed Workflow Diagram" loading="lazy" src="/images/s01.png"></p>
<ol start="4">
<li>The recipient accepts the badge and chooses to make it public or private.</li>
</ol>
<p><img alt="BadgeFed Workflow Diagram" loading="lazy" src="/images/s03.png"></p>
<ol start="5">
<li>BadgeFed creates a note and associates it with the OpenBadge. This note is decentralized by sending it to the inboxes of the issuer&rsquo;s followers using ActivityPub. The note mentions the recipient, and the badge URL is also an ActivityPub object. The OpenBadge can be exported from this page.</li>
</ol>
<blockquote>
<p>For example, check out <a href="https://badges.vocalcat.com/view/grant/badgesvocalcatcom_4_8_b26c1fc562a7596ef4c3517ec01fbcd6">this badge</a>.<br>
It shows a credential granted to a Fediverse profile and has a note representation.<br>
Copy the badge URL and paste it into Mastodon; you can boost, comment, and share this note.</p></blockquote>
<p>All comments will appear on the badge page.</p>
<blockquote>
<p>If you make an <code>Accept: application/activity+json</code> request to the badge URL, it will also return an ActivityPub object.</p></blockquote>
<p><img alt="BadgeFed Workflow Diagram" loading="lazy" src="/images/s05.png"></p>
<ol start="6">
<li>If any of the issuer&rsquo;s followers is another BadgeFed issuer, they can consume and store a copy of the badge, further decentralizing it.</li>
</ol>
<blockquote>
<p>For example, see <a href="https://badges.vocalcat.com/view/grant/verifiedbymahodev_1_1_89fb419013f52130e83e223663906b6b">this external badge</a>.<br>
It demonstrates a decentralized badge that can be viewed at its original URL, following a pattern similar to other Fediverse services like Mastodon.</p></blockquote>
<p><img alt="BadgeFed Workflow Diagram" loading="lazy" src="/images/s06.png"></p>
<ol start="7">
<li>Any recipient can search for their badges on any BadgeFed instance. The search will display badges from the local instance as well as external badges. Similar to Mastodon, badges can be viewed on the current server or opened at their original source.</li>
</ol>
<p><img alt="BadgeFed Workflow Diagram" loading="lazy" src="/images/s07.png"></p>
<p><strong>ActivityPub integration enables decentralized badge sharing and notifications across the Fediverse.</strong></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>

  </footer><div>
    <h3>Comments</h3>
    <p>
      You can reply to this post with any existing account on any Mastodon server.
    </p>
    <p>
      <h4>Where is your account hosted?</h4>
      <form onsubmit="replyToMastodon(); return false;">
        <span id="error-reply" style="display: none; color: red;">&nbsp;</span>
        <input type="text" class="mastodon-url-input" id="reply-mastodon-url-host" placeholder="ex. mastodon.social" />
        <input class="button-9" type="submit" value="Take me home!" onclick="replyToMastodon();" />
      </form>
    </p>
    <p>Not on Mastodon? <a class="join-mastodon-link" href="https://joinmastodon.org/">Join now!</a></p>
    <script>
      var replyToMastodon = function()
      {
        var mastodonUrl = document.getElementById('reply-mastodon-url-host').value;

        if (mastodonUrl == undefined || mastodonUrl == '')
        {
            document.getElementById('error-reply').style.display = 'block';
            document.getElementById('error-reply').innerText = 'Please enter your Mastodon server URL. For example: techhub.social';
            return;
        }

        
        if (!mastodonUrl.includes('.'))
        {
            document.getElementById('error-reply').style.display = 'block';
            document.getElementById('error-reply').innerText = 'Please enter a valid Mastodon server URL. For example: techhub.social';
            return;
        }
        var mastodonUrl = document.getElementById('reply-mastodon-url-host').value;
        
        if (!mastodonUrl.startsWith('http')) {
          mastodonUrl = "https:\/\/" + mastodonUrl;
        }
        
        noteUrl = 'https:\/\/badgefed.vocalcat.com\//socialweb/notes/233b2595101b64a6b946c716bb307e56';
        document.location.href = mastodonUrl + '/authorize_interaction?uri=' + encodeURIComponent(noteUrl);
      };
    </script>
    <div class="mastodon-comments-container">
      <div id="comments-wrapper">
        <p id="mastodon-comments-list"><button class="button-load-comments" id="load-comment">Load comments</button></p>
        <noscript><p>Loading comments relies on JavaScript. Try enabling JavaScript and reloading</p></noscript>
      </div>
    </div>
  </div>
  
  <script src="/js/purify.min.js"></script>
  <script src="/js/mastodon-comments.js"></script>
  <script type="text/javascript">
   
    function loadComments() {
      let commentsWrapper = document.getElementById("comments-wrapper");
      
      const timestamp = Date.now();

      document.getElementById("load-comment").innerHTML = "Loading";
      fetch('https:\/\/badgefed.vocalcat.com\//socialweb/replies/233b2595101b64a6b946c716bb307e56' + '?timestamp=' + timestamp)
        .then(function(response) {
          if (response.ok) {
            return response.json();
          }

          if (response.status === 404) {
            
            commentsWrapper.innerHTML = "<p>No comments found</p>";
            return Promise.reject("Comments not found");
          }
          
          
          commentsWrapper.innerHTML = "<p>Error fetching comments.</p>";
          return Promise.reject("Error fetching comments");
        })
        .then(function(data) {
          let promises = data.items.map(function(replyId) {
            return fetch(getStatusUrl(replyId), {
              headers: {
                'Content-Type': 'application/activity+json',
                'Accept': 'application/activity+json'
              }
            }).then(function(response) {
              if (!response.ok) {
                console.log("Error fetching reply:", response.statusText);
                return Promise.reject("Error fetching reply");
              }
              return response.json();
            });
          });
          
          return Promise.all(promises);
        }).then(function(responses) {
          responses.sort((a, b) => new Date(a.created_at) - new Date(b.created_at));

          commentsWrapper.innerHTML = "";

          responses.forEach(function(status) {
              if( status.account.display_name.length > 0 ) {
                status.account.display_name = escapeHtml(status.account.display_name);
                status.account.display_name = emojify(status.account.display_name, status.account.emojis);
              } else {
                status.account.display_name = status.account.username;
              };

              let actorUrl = new URL(status.account.url);
              let instance = actorUrl.host;
              
              const isReply = true;

              let op = false;
              
              status.content = emojify(status.content, status.emojis);

              let avatarSource = document.createElement("source");
              avatarSource.setAttribute("srcset", escapeHtml(status.account.avatar));
              avatarSource.setAttribute("media", "(prefers-reduced-motion: no-preference)");

              let avatarImg = document.createElement("img");
              avatarImg.className = "avatar-mastodon";
              avatarImg.setAttribute("src", escapeHtml(status.account.avatar_static));
              avatarImg.setAttribute("alt", `@${ status.account.username }@${ instance } avatar`);

              let avatarPicture = document.createElement("picture");
              avatarPicture.appendChild(avatarSource);
              avatarPicture.appendChild(avatarImg);

              let avatar = document.createElement("a");
              avatar.className = "avatar-link";
              avatar.setAttribute("href", status.account.url);
              avatar.setAttribute("rel", "external nofollow");
              avatar.setAttribute("title", `View profile at @${ status.account.username }@${ instance }`);
              avatar.appendChild(avatarPicture);

              let instanceBadge = document.createElement("a");
              instanceBadge.className = "instance";
              instanceBadge.setAttribute("href", status.account.url);
              instanceBadge.setAttribute("title", `@${ status.account.username }@${ instance }`);
              instanceBadge.setAttribute("rel", "external nofollow");
              instanceBadge.textContent = instance;

              let display = document.createElement("span");
              display.className = "display";
              display.setAttribute("itemprop", "author");
              display.setAttribute("itemtype", "http://schema.org/Person");
              display.innerHTML = status.account.display_name;

              let header = document.createElement("header");
              header.className = "author";
              header.appendChild(display);
              header.appendChild(instanceBadge);

              let permalink = document.createElement("a");
              permalink.setAttribute("href", status.url);
              permalink.setAttribute("itemprop", "url");
              permalink.setAttribute("title", `View comment at ${ instance }`);
              permalink.setAttribute("rel", "external nofollow");
              permalink.textContent = new Date( status.created_at ).toLocaleString('en-US', {
                dateStyle: "long",
                timeStyle: "short",
              });

              let timestamp = document.createElement("time");
              timestamp.setAttribute("datetime", status.created_at);
              timestamp.appendChild(permalink);

              let main = document.createElement("main");
              main.setAttribute("itemprop", "text");
              main.innerHTML = status.content;

              let interactions = document.createElement("footer");

              let faves = document.createElement("a");
              faves.className = "faves";
              faves.setAttribute("href", `${ status.url }/favourites`);
              faves.setAttribute("title", `Favorites from ${ instance }`);
              faves.textContent = status.favourites_count;

              interactions.appendChild(faves);

              let comment = document.createElement("article");
              comment.id = `comment-${ status.id }`;
              comment.className = isReply ? "comment comment-reply" : "comment";
              comment.setAttribute("itemprop", "comment");
              comment.setAttribute("itemtype", "http://schema.org/Comment");
              comment.appendChild(avatar);
              comment.appendChild(header);
              comment.appendChild(timestamp);
              comment.appendChild(main);
              comment.appendChild(interactions);

              if(op === true) {
                comment.classList.add("op");

                avatar.classList.add("op");
                avatar.setAttribute(
                  "title",
                  "Blog post author; " + avatar.getAttribute("title")
                );

                instanceBadge.classList.add("op");
                instanceBadge.setAttribute(
                  "title",
                  "Blog post author: " + instanceBadge.getAttribute("title")
                );
              }

              commentsWrapper.innerHTML += DOMPurify.sanitize(comment.outerHTML);
            });
        }).catch(function(error) {
          
          console.error("Error:", error);
        });
      }
      document.getElementById("load-comment").addEventListener("click", loadComments);
  </script>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://badgefed.vocalcat.com/">BadgeFed Official Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
